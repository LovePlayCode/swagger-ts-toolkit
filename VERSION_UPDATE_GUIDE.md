# ğŸ“¦ ç‰ˆæœ¬æ›´æ–°å’Œå‘å¸ƒæŒ‡å—

## å¿«é€Ÿå‚è€ƒ

### npm ç‰ˆæœ¬ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
npm version

# æŸ¥çœ‹å·²å‘å¸ƒçš„ç‰ˆæœ¬
npm view swagger-ts-toolkit versions

# å‡çº§ç‰ˆæœ¬ï¼ˆä¸‰ç§æ–¹å¼ï¼‰
npm version patch    # 1.0.0 -> 1.0.1 (Bug ä¿®å¤)
npm version minor    # 1.0.0 -> 1.1.0 (æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹)
npm version major    # 1.0.0 -> 2.0.0 (ç ´åæ€§æ›´æ–°)

# æ‰‹åŠ¨è®¾ç½®ç‰ˆæœ¬
npm version 1.0.1
```

## ç‰ˆæœ¬å·è§„åˆ™ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰

æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·` (MAJOR.MINOR.PATCH)

- **MAJOR (ä¸»ç‰ˆæœ¬å·)**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **MINOR (æ¬¡ç‰ˆæœ¬å·)**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **PATCH (ä¿®è®¢å·)**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### ç¤ºä¾‹

- `1.0.0 â†’ 1.0.1`: Bug ä¿®å¤
- `1.0.1 â†’ 1.1.0`: æ–°å¢åŠŸèƒ½
- `1.1.0 â†’ 2.0.0`: ç ´åæ€§æ›´æ–°

## è§£å†³ E403 é”™è¯¯

### é”™è¯¯ä¿¡æ¯
```
npm error 403 Forbidden - You cannot publish over previously published versions
```

### åŸå› 
npm ä¸å…è®¸è¦†ç›–å·²å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œå³ä½¿ä½ åˆ é™¤äº†è¿œç¨‹ç‰ˆæœ¬ã€‚

### è§£å†³æ–¹æ¡ˆ

**æ–¹å¼ 1ï¼šè‡ªåŠ¨å‡çº§ç‰ˆæœ¬**
```bash
# Bug ä¿®å¤ï¼ˆæ¨èï¼‰
npm version patch

# æ–°åŠŸèƒ½
npm version minor

# ç ´åæ€§æ›´æ–°
npm version major
```

**æ–¹å¼ 2ï¼šæ‰‹åŠ¨ä¿®æ”¹ package.json**
```json
{
  "version": "1.0.1"  // ä» 1.0.0 æ”¹ä¸º 1.0.1
}
```

## å®Œæ•´å‘å¸ƒæµç¨‹

### 1. æ›´æ–°ä»£ç å¹¶æµ‹è¯•
```bash
# ç¡®ä¿æ‰€æœ‰ä¿®æ”¹å·²æäº¤
git status

# è¿è¡Œæ„å»ºæµ‹è¯•
npm run build

# éªŒè¯æ‰“åŒ…å†…å®¹
npm pack --dry-run
```

### 2. æ›´æ–°ç‰ˆæœ¬å’Œ CHANGELOG

**è‡ªåŠ¨æ–¹å¼ï¼ˆæ¨èï¼‰**:
```bash
# å‡çº§ç‰ˆæœ¬å·ï¼ˆè‡ªåŠ¨åˆ›å»º git tagï¼‰
npm version patch -m "chore: release v%s"
```

**æ‰‹åŠ¨æ–¹å¼**:
```bash
# 1. ç¼–è¾‘ package.jsonï¼Œä¿®æ”¹ version
# 2. æ›´æ–° CHANGELOG.md
# 3. æäº¤æ›´æ”¹
git add package.json CHANGELOG.md
git commit -m "chore: bump version to 1.0.1"
git tag v1.0.1
```

### 3. å‘å¸ƒåˆ° npm
```bash
# ç¡®ä¿å·²ç™»å½•
npm whoami

# æœªç™»å½•åˆ™å…ˆç™»å½•
npm login

# å‘å¸ƒï¼ˆå…¬å¼€åŒ…ï¼‰
npm publish --access public

# éªŒè¯å‘å¸ƒæˆåŠŸ
npm view swagger-ts-toolkit version
```

### 4. æ¨é€åˆ° Git
```bash
# æ¨é€ä»£ç å’Œæ ‡ç­¾
git push origin main
git push origin --tags

# æˆ–è€…ä¸€æ¬¡æ€§æ¨é€
git push origin main --tags
```

## ä¸€é”®å‘å¸ƒè„šæœ¬

ä½¿ç”¨é¡¹ç›®æä¾›çš„è‡ªåŠ¨åŒ–è„šæœ¬ï¼š

```bash
./scripts/publish.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œï¼š
- âœ… æ£€æŸ¥ Git çŠ¶æ€
- âœ… è¿è¡Œæ„å»º
- âœ… å‡çº§ç‰ˆæœ¬
- âœ… æ›´æ–° CHANGELOG
- âœ… å‘å¸ƒåˆ° npm
- âœ… æ¨é€åˆ° Git

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ’¤é”€å·²å‘å¸ƒçš„ç‰ˆæœ¬ï¼Ÿ

**A**: npm ä¸å…è®¸åˆ é™¤å·²å‘å¸ƒè¶…è¿‡ 24 å°æ—¶çš„ç‰ˆæœ¬ã€‚24 å°æ—¶å†…å¯ä»¥ä½¿ç”¨ï¼š
```bash
npm unpublish swagger-ts-toolkit@1.0.0
```

ä½†ä¸æ¨èè¿™æ ·åšï¼Œåº”è¯¥å‘å¸ƒæ–°ç‰ˆæœ¬ä¿®å¤é—®é¢˜ã€‚

### Q: å¦‚ä½•æŸ¥çœ‹æŸä¸ªç‰ˆæœ¬çš„è¯¦ç»†ä¿¡æ¯ï¼Ÿ

```bash
npm view swagger-ts-toolkit@1.0.1
```

### Q: å¦‚ä½•å‘å¸ƒ beta ç‰ˆæœ¬ï¼Ÿ

```bash
# è®¾ç½®ç‰ˆæœ¬
npm version 1.1.0-beta.0

# å‘å¸ƒåˆ° beta æ ‡ç­¾
npm publish --tag beta --access public

# ç”¨æˆ·å®‰è£…
npm install swagger-ts-toolkit@beta
```

### Q: å¿˜è®°å‡çº§ç‰ˆæœ¬å°±å‘å¸ƒäº†æ€ä¹ˆåŠï¼Ÿ

npm ä¼šåœ¨ `prepublishOnly` é’©å­å‰é˜»æ­¢å‘å¸ƒï¼Œå¹¶æç¤º 403 é”™è¯¯ã€‚æ­¤æ—¶ï¼š
1. å‡çº§ç‰ˆæœ¬å·
2. é‡æ–°æ‰§è¡Œ `npm publish`

### Q: å¦‚ä½•å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Ÿ

npm ä¸æ”¯æŒå›é€€ï¼Œä½†å¯ä»¥ï¼š
1. å‘å¸ƒæ–°ç‰ˆæœ¬ä¿®å¤é—®é¢˜
2. æˆ–è€…æ›´æ–° `latest` æ ‡ç­¾æŒ‡å‘æ—§ç‰ˆæœ¬ï¼š
```bash
npm dist-tag add swagger-ts-toolkit@1.0.0 latest
```

## ç‰ˆæœ¬å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æµ‹è¯•é€šè¿‡
- [ ] å·²æ›´æ–° CHANGELOG.md
- [ ] å·²æ›´æ–° README.mdï¼ˆå¦‚æœ‰ API å˜æ›´ï¼‰
- [ ] ç‰ˆæœ¬å·å·²å‡çº§
- [ ] å·²è¿è¡Œ `npm run build`
- [ ] å·²è¿è¡Œ `npm pack --dry-run` æ£€æŸ¥æ‰“åŒ…å†…å®¹
- [ ] Git å·¥ä½œåŒºå¹²å‡€ï¼ˆæ— æœªæäº¤æ–‡ä»¶ï¼‰
- [ ] å·²ç™»å½• npm (`npm whoami`)
- [ ] å‘å¸ƒåå·²éªŒè¯ (`npm view swagger-ts-toolkit version`)
- [ ] å·²æ¨é€ Git æ ‡ç­¾ (`git push --tags`)

## å½“å‰ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: 1.0.1
- **ä¸Šä¸€ç‰ˆæœ¬**: 1.0.0
- **å˜æ›´ç±»å‹**: PATCH (Bug ä¿®å¤)
- **ä¸»è¦æ›´æ–°**: ä¿®å¤é…ç½®è·¯å¾„æ— æ•ˆé—®é¢˜
